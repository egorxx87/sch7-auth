* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
  background: #f3f4f6;
  color: #111827;
  line-height: 1.4;
}

.layout { max-width: 1100px; margin: 0 auto; padding: 16px; }

.header { margin-bottom: 12px; }
.header__title { font-size: 1.5rem; font-weight: 800; margin-bottom: 4px; }
.header__subtitle { font-size: 0.92rem; color: #6b7280; }

/* TOP NAV (Schedule / Reservations) */
.top-nav {
  display: inline-flex;
  background: #e5e7eb;
  border-radius: 999px;
  padding: 4px;
  gap: 6px;
  margin-bottom: 14px;
  flex-wrap: wrap;
}
.top-nav__btn {
  text-decoration: none;
  border-radius: 999px;
  padding: 7px 14px;
  font-size: 0.88rem;
  color: #4b5563;
  background: transparent;
  border: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 600;
}
.top-nav__btn:hover {
  background: rgba(17, 24, 39, 0.1);
}
.top-nav__btn--active { 
  background: #111827; 
  color: #f9fafb; 
}
.top-nav__btn--active:hover {
  background: #111827;
  opacity: 0.95;
}

/* Card */
.card {
  background: #ffffff;
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 10px 20px rgba(15, 23, 42, 0.06);
}

/* View toggle */
.view-toggle {
  display: inline-flex;
  border-radius: 999px;
  background: #f3f4f6;
  padding: 3px;
  margin-bottom: 10px;
  gap: 4px;
}
.view-toggle__btn {
  border: none;
  border-radius: 999px;
  padding: 6px 12px;
  font-size: 0.85rem;
  cursor: pointer;
  background: transparent;
  color: #6b7280;
  font-weight: 600;
}
.view-toggle__btn--active { background: #111827; color: #f9fafb; }

.week-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
  flex-wrap: wrap;
}
.week-nav__btn {
  border-radius: 999px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 0.85rem;
  color: #111827;
  font-weight: 600;
  transition: background .15s, border-color .15s, opacity .15s;
}
.week-nav__btn:disabled { cursor: default; opacity: .5; }
.week-nav__btn--ghost { background: #ffffff; }

.week-nav__label-wrap { flex: 1; min-width: 240px; text-align: center; }
.week-nav__label { font-weight: 800; font-size: 1rem; }
.week-nav__sub { margin-top: 2px; font-size: 0.78rem; color: #6b7280; }

.week-nav__right { display: inline-flex; gap: 8px; align-items: center; flex-wrap: wrap; justify-content: flex-end; }

/* Schedule table */
.schedule-wrapper { width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.schedule-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
  min-width: 680px;
  table-layout: fixed;
}
.schedule-table th, .schedule-table td {
  border-bottom: 1px solid #e5e7eb;
  padding: 6px 8px;
  text-align: left;
  vertical-align: middle;
}
.schedule-table th { background: #f3f4f6; font-weight: 800; }

.time-cell { white-space: nowrap; min-width: 62px; font-weight: 700; }

.schedule-pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 10px;
  margin: 3px 4px 3px 0;
  border-radius: 999px;
  font-size: 0.86rem;
  border: 1px solid transparent;
  cursor: pointer;
  white-space: nowrap;
  min-width: 44px;
}
.schedule-pill-empty {
  background: #e5e7eb;
  color: #6b7280;
  border-color: #d1d5db;
  font-style: italic;
}

.day-divider td {
  background: #f5e1c7;
  font-weight: 900;
  border-top: 2px solid #e5e7eb;
  border-bottom: 1px solid #e5e7eb;
  padding: 10px 10px;
}

.footer-note { margin-top: 10px; font-size: 0.78rem; color: #6b7280; }

/* Mobile schedule blocks */
.schedule-desktop { display: block; }
.schedule-mobile { display: none; margin-top: 10px; }

.mobile-day-block { margin-bottom: 14px; border: 1px solid #e5e7eb; border-radius: 14px; overflow: hidden; }
.mobile-day-header { background: #f5e1c7; padding: 10px 12px; font-weight: 900; }
.mobile-role-block { padding: 10px 12px; border-top: 1px solid #e5e7eb; }
.mobile-role-title { font-weight: 900; margin-bottom: 6px; }
.mobile-role-table { width: 100%; border-collapse: collapse; }
.mobile-role-table td { padding: 7px 0; border-bottom: 1px solid #f1f5f9; vertical-align: top; }
.mobile-role-table tr:last-child td { border-bottom: none; }

/* Picker modal */
.picker-backdrop {
  position: fixed; inset: 0;
  background: rgba(15, 23, 42, 0.35);
  display: flex; align-items: center; justify-content: center;
  padding: 16px;
  z-index: 500;
}
.picker-hidden { display: none; }
.picker {
  width: min(560px, 100%);
  background: #fff;
  border-radius: 16px;
  padding: 14px;
  box-shadow: 0 20px 50px rgba(15, 23, 42, 0.22);
}
.picker-title { font-weight: 900; font-size: 1.05rem; margin-bottom: 6px; }
.picker-role-label { color: #6b7280; font-size: 0.85rem; margin-bottom: 10px; }
.picker-options { display: flex; flex-wrap: wrap; gap: 8px; }
.picker-option-btn {
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  border-radius: 999px;
  padding: 8px 12px;
  cursor: pointer;
  font-weight: 700;
}
.picker-actions { display: flex; gap: 8px; justify-content: flex-end; margin-top: 12px; flex-wrap: wrap; }
.picker-actions button {
  border-radius: 999px;
  border: 1px solid #e5e7eb;
  background: #fff;
  padding: 8px 12px;
  cursor: pointer;
  font-weight: 800;
}
.picker-actions .danger { background: #111827; color: #fff; border-color: #111827; }

/* Stats */
.stats-card { padding-top: 14px; }
.stats-header { display: flex; align-items: center; justify-content: space-between; gap: 10px; margin-bottom: 8px; }
.stats-title { font-size: 1.15rem; font-weight: 900; }
.stats-subtitle { color: #6b7280; font-size: 0.86rem; margin-bottom: 12px; }

.stats-controls { display: grid; gap: 10px; margin-bottom: 12px; }
.stats-control-group { display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.stats-label { color: #6b7280; font-size: 0.85rem; font-weight: 800; }

.stats-toggle-btn {
  border-radius: 999px;
  border: 1px solid #e5e7eb;
  background: #fff;
  padding: 8px 12px;
  cursor: pointer;
  font-weight: 900;
}
.stats-toggle-btn--active { background: #111827; color: #fff; border-color: #111827; }

.stats-toggle-btn--ghost{
  background:#f9fafb;
}

/* month picker in stats */
.stats-label--sub{ opacity:.65; font-weight:800; }
.stats-month-input{
  height: 38px;
  padding: 0 12px;
  border: 1px solid #e5e7eb;
  border-radius: 999px;
  background: #fff;
  font-weight: 900;
  color: #111827;
  outline: none;
}
.stats-month-input:focus{
  box-shadow: 0 0 0 3px rgba(59,130,246,.25);
  border-color: rgba(59,130,246,.4);
}

.stats-toggle-pill {
  border-radius: 999px;
  border: 1px solid #e5e7eb;
  background: #f9fafb;
  padding: 7px 11px;
  cursor: pointer;
  font-weight: 900;
}
.stats-toggle-pill--active { background: #111827; color: #fff; border-color: #111827; }

.stats-summary { margin-bottom: 12px; }
.stats-summary-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
}
.stats-summary-item { border: 1px solid #e5e7eb; border-radius: 14px; padding: 10px; }
.stats-summary-label { color: #6b7280; font-size: 0.78rem; font-weight: 900; }
.stats-summary-value { font-size: 1.15rem; font-weight: 900; margin-top: 2px; }
.stats-summary-days { font-size: 0.8rem; color: #6b7280; margin-top: 2px; }

.stats-table-wrapper { overflow-x: auto; }
.stats-table { width: 100%; border-collapse: collapse; min-width: 520px; }
.stats-table th, .stats-table td { border-bottom: 1px solid #e5e7eb; padding: 8px; text-align: left; }
.stats-table th { background: #f3f4f6; font-weight: 900; }

/* Global loader */
.global-loader {
  position: fixed;
  inset: 0;
  background: rgba(243,244,246,0.72);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  gap: 10px;
  z-index: 80;
  backdrop-filter: blur(2px);
}
.global-loader--hidden { display: none; }
.spinner {
  width: 34px; height: 34px;
  border-radius: 999px;
  border: 3px solid #e5e7eb;
  border-top-color: #111827;
  animation: spin 0.9s linear infinite;
}
.global-loader__text { font-weight: 900; color: #111827; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Responsive */
@media (max-width: 820px) {
  .schedule-desktop { display: none; }
  .schedule-mobile { display: block; }
  .week-nav__label-wrap { text-align: left; }
  .week-nav { gap: 8px; }
  .stats-summary-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}

@media (max-width: 480px) {
  .layout { padding: 12px; }
  .header__title { font-size: 1.25rem; }
  .top-nav { width: 100%; }
  .top-nav__btn { flex: 1; }
  .week-nav__right { width: 100%; justify-content: flex-start; }
}
.week-compact-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 16px;
  font-size: 14px;
}

.week-compact-table th,
.week-compact-table td {
  border: 1px solid #e5e7eb;
  padding: 8px;
  text-align: center;
}

.week-compact-table th {
  background: #f3f4f6;
  font-weight: 700;
}

.week-compact-table .name-cell {
  text-align: left;
  font-weight: 600;
  background: #fafafa;
}
.week-filter{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin: 10px 0 6px;
}

.week-filter__pill{
  border-radius:999px;
  border:1px solid #e5e7eb;
  background:#f9fafb;
  padding:7px 12px;
  cursor:pointer;
  font-weight:900;
  font-size:0.85rem;
}

.week-filter__pill--active{
  background:#111827;
  color:#fff;
  border-color:#111827;
}
.week-compact-table td{
  vertical-align: top;
  min-width: 90px;
}

.week-compact-table .time-cell{
  font-weight: 900;
  color:#111827;
  background:#f9fafb;
  position: sticky;
  left: 0;
  z-index: 2;
}

/* ===== NAME ONLY ON TOP OF COLUMN ===== */

/* по умолчанию текст скрыт */
.schedule-pill {
  color: transparent;
}

/* скрываем имя во всех сегментах */
.schedule-pill {
  color: transparent;
}

/* показываем имя ТОЛЬКО в первом часе смены */
.schedule-pill[data-start="1"] {
  color: #111827;
  font-weight: 900;
  font-size: 0.85rem;
}
.day-blocks-grid {
  position: relative;
  min-height: 500px;
  padding-left: 70px;
}

.day-time-label {
  position: absolute;
  left: 0;
  width: 60px;
  font-weight: 900;
  font-size: 13px;
}

.day-shift-block {
  position: absolute;
  width: 54px;
  border-radius: 10px;
  padding: 6px 6px;
  font-weight: 900;
  font-size: 13px;
  color: #111827;
  cursor: pointer;
  box-shadow: 0 6px 14px rgba(0,0,0,0.15);
  overflow: hidden;
}
/* отключаем старый абсолютный day-blocks режим (он ломает верстку) */
.day-blocks-grid,
.day-time-label,
.day-shift-block { display: none !important; }
.day-block { position: relative; z-index: 2; }
.day-slot  { position: relative; z-index: 1; }

/* =====================================================
   DAY GRID (final)
   - сетка почти невидимая
   - линия новой смены с 16:00
   - пунктирные разделители ролей
   - mobile выглядит почти как desktop (scroll + sticky)
   ===================================================== */

:root{
  --grid-line: rgba(17,24,39,0.035);      /* почти не видно */
  --grid-line-strong: rgba(17,24,39,0.16);
  --grid-sep: rgba(17,24,39,0.12);
  --grid-sep-bg: rgba(17,24,39,0.01);
}

/* общий контейнер дня */
.day-compact{
  width: 100%;
  overflow-x: auto;               /* и на мобилке тоже */
  -webkit-overflow-scrolling: touch;
}

/* Zeit + Admin(3) + SEP + Kellner(4) + SEP + Küche(4) + SEP + Reinigung(2) */
.day-grid{
  display: grid;
  grid-template-columns:
    70px
    repeat(3, minmax(46px, 1fr))
    10px
    repeat(4, minmax(46px, 1fr))
    10px
    repeat(4, minmax(46px, 1fr))
    10px
    repeat(2, minmax(46px, 1fr));
  grid-auto-rows: 30px;
  min-width: 980px;

  border: 1px solid var(--grid-line);
  border-radius: 14px;
  overflow: hidden;
  background: #fff;
}

/* sticky header */
.day-head{
  position: sticky;
  top: 0;
  z-index: 8;
  background: #f3f4f6;
  font-weight: 900;
  font-size: 0.82rem;
  padding: 6px 8px;
  border-bottom: 1px solid var(--grid-line);
}
.day-head--role{ text-align: center; }

/* sticky Zeit column */
.day-time{
  position: sticky;
  left: 0;
  z-index: 7;
  padding: 0 8px;
  display: flex;
  align-items: center;
  font-weight: 900;
  background: #fff;

  border-bottom: 1px solid var(--grid-line);
}

/* Zeit header (и сверху sticky, и слева sticky) */
.day-head--time{
  left: 0;
  z-index: 12;
  box-shadow: 1px 0 0 var(--grid-line);
}

/* cells: делаем вертикальные линии почти “0” */
.day-cell{
  padding: 2px 6px;
  margin: 0;
  border-radius: 0;
  cursor: pointer;
  overflow: hidden;

  border-bottom: 1px solid var(--grid-line);
  border-left: 0;                 /* убираем вертикальную сетку */
}

.day-cell--empty{ background: #fff; }

.day-cell__label{
  font-size: 0.78rem;
  font-weight: 900;
  line-height: 1.05;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* пунктирные разделители ролей */
.day-sep{
  background: var(--grid-sep-bg);
  border-left: 1px dashed var(--grid-sep);
  border-bottom: 1px solid var(--grid-line);
}
.day-sep--head{
  position: sticky;
  top: 0;
  z-index: 9;
  background: #f3f4f6;
  border-bottom: 1px solid var(--grid-line);
}

/* Линия новой смены 16:00 — аккуратно и видно */
.day-row--shiftstart{
  box-shadow: inset 0 2px 0 var(--grid-line-strong);
}

/* единый цветной блок (обводка) */
.day-cell--filled{
  position: relative;
  box-shadow: inset 2px 0 0 var(--pill-border), inset -2px 0 0 var(--pill-border);
}
.day-cell--filled.day-cell--start{
  box-shadow:
    inset 2px 0 0 var(--pill-border),
    inset -2px 0 0 var(--pill-border),
    inset 0 2px 0 var(--pill-border);
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}
.day-cell--filled.day-cell--end{
  /* низ ровный */
  box-shadow:
    inset 2px 0 0 var(--pill-border),
    inset -2px 0 0 var(--pill-border);
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}
/* микро-зазор между соседними блоками */
.day-cell--filled::after{
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 1px;
  bottom: 1px;
  border-radius: inherit;
  pointer-events: none;
}

/* чуть приятнее на телефоне */
@media (max-width: 480px){
  .day-grid{ grid-auto-rows: 28px; }
  .day-cell__label{ font-size: 0.74rem; }
}
.week-blocks{
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
}

.week-day-card{
  background: #fff;
  border: 1px solid #eef2f7;
  border-radius: 16px;
  overflow: hidden;
}

.week-day-title{
  padding: 10px 14px;
  font-weight: 900;
  background: #f7f7f8;
  border-bottom: 1px solid #eef2f7;
}

.week-day-body{
  padding: 10px 10px 14px;
}

/* делаем внутри недели чуть компактнее, чем в режиме "День" */
.week-day-body .day-grid{
  grid-auto-rows: 26px;
}
.week-day-body .day-time{
  font-size: 0.82rem;
}
.week-day-body .day-cell__label{
  font-size: 0.74rem;
}

/* =====================================================
   WEEK ROLE "BLOCKS" VIEW
   - включается только для кнопок роли в режиме "Неделя"
   - 7 дней по горизонтали, время по вертикали (09:00–22:00)
   - внутри дня: N колонок слотов роли (Admin=3, Kellner=4, Küche=4, Reinigung=2)
   ===================================================== */

.week-role-view{
  margin-top: 10px;
}

.week-role-title{
  font-weight: 900;
  margin: 6px 0 10px;
}

.week-role-grid{
  display: grid;
  width: max-content;
  min-width: 980px;
  grid-auto-rows: 30px;
}
.week-role-head{
  position: sticky;
  top: 0;
  z-index: 8;
  background: #f3f4f6;
  font-weight: 900;
  font-size: 0.82rem;
  padding: 6px 8px;
  border-bottom: 1px solid var(--grid-line, rgba(17,24,39,0.035));
  text-align: center;
}

.week-role-head--time{
  left: 0;
  z-index: 12;
  text-align: left;
  box-shadow: 1px 0 0 var(--grid-line, rgba(17,24,39,0.035));
}
.week-role-head--time,
.week-role-time{
  background: #fff;              /* важно, чтобы не просвечивало */
  z-index: 20;                   /* поверх цветных блоков */
  box-shadow: 1px 0 0 rgba(17,24,39,0.06);
}

.week-role-time{
  position: sticky;
  left: 0;
  z-index: 7;
  padding: 0 8px;
  display: flex;
  align-items: center;
  font-weight: 900;
  background: #fff;
  border-bottom: 1px solid var(--grid-line, rgba(17,24,39,0.035));
}

/* ячейка недели использует те же классы start/end, что и day */
.week-role-cell{
  padding: 2px 6px;
  border-bottom: 1px solid var(--grid-line, rgba(17,24,39,0.035));
  cursor: pointer;
  overflow: hidden;
}

.week-role-cell--disabled{
  cursor: default;
  opacity: 0.45;
}

.week-role-cell__label{
  font-size: 0.78rem;
  font-weight: 900;
  line-height: 1.05;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.week-role-sep{
  background: var(--grid-sep-bg, rgba(17,24,39,0.01));
  border-left: 1px dashed var(--grid-sep, rgba(17,24,39,0.12));
  border-bottom: 1px solid var(--grid-line, rgba(17,24,39,0.035));
}
.week-role-sep--head{
  position: sticky;
  top: 0;
  z-index: 9;
  background: #f3f4f6;
  border-bottom: 1px solid var(--grid-line, rgba(17,24,39,0.035));
}

@media (max-width: 480px){
  .week-role-grid{ grid-auto-rows: 28px; }
  .week-role-cell__label{ font-size: 0.74rem; }
}
/* week role: сделаем горизонтальный скролл очевидным */
/* ===== WEEK ROLE: скролл + Day-style блоки ===== */
.week-role-wrap{
  width:100%;
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  padding-bottom: 10px;
  scrollbar-gutter: stable;
}

.week-role-wrap::-webkit-scrollbar{ height: 10px; }
.week-role-wrap::-webkit-scrollbar-track{
  background: rgba(17,24,39,0.06);
  border-radius: 999px;
}
.week-role-wrap::-webkit-scrollbar-thumb{
  background: rgba(17,24,39,0.22);
  border-radius: 999px;
}



/* совпадение классов с JS */
.week-role-cell--click{ cursor:pointer; }
.week-role-cell--nocell{ opacity:0.45; cursor:default; }

/* Day-style блоки (обводка + скругления start/end) */
.week-role-cell{
  border-left: 0; /* как в Day — без вертикальной сетки */
}

.week-role-cell--filled{
  position: relative;
  box-shadow: inset 2px 0 0 var(--pill-border), inset -2px 0 0 var(--pill-border);
}

.week-role-cell--filled.week-role-cell--start{
  box-shadow:
    inset 2px 0 0 var(--pill-border),
    inset -2px 0 0 var(--pill-border),
    inset 0 2px 0 var(--pill-border);
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

.week-role-cell--filled.week-role-cell--end{
  /* низ ровный */
  box-shadow:
    inset 2px 0 0 var(--pill-border),
    inset -2px 0 0 var(--pill-border);
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}

/* как в Day — чуть “сглаживает” внутри */
.week-role-cell--filled::after{
  content:"";
  position:absolute;
  left:0; right:0; top:1px; bottom:1px;
  border-radius: inherit;
  pointer-events:none;
}
/* ===== vertical time watermark inside blocks ===== */
.block-time-vert{
  position:absolute;
  left:50%;
  top:50%;
  transform: translate(-50%, -50%) rotate(90deg);

  white-space: nowrap;
  line-height: 1;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.4px;

  opacity: 0.14;
  color: rgba(17,24,39,0.8);

  pointer-events:none;
  user-select:none;
}

/* чуть меньше на телефоне */
@media (max-width: 480px){
  .block-time-vert{ font-size: 11px; opacity: 0.12; }
}
/* чтобы watermark не обрезался одной ячейкой */
.day-cell--filled,
.week-role-cell--filled{
  overflow: visible !important;
}
/* overlay для времени на весь блок (не на ячейку) */
.block-time-overlay{
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  user-select: none;
}

/* FIX: центрируем watermark строго по центру блока */
.block-time-overlay .block-time-vert{
  position: static !important;     /* убираем absolute */
  left: auto !important;
  top: auto !important;
  transform: rotate(90deg) !important;  /* только поворот */
  white-space: nowrap;
}

/* короткие смены: уменьшаем/прячем */
.block-time-overlay[data-len="2"] .block-time-vert{ font-size: 10px; opacity: 0.10; }
.block-time-overlay[data-len="3"] .block-time-vert{ font-size: 11px; opacity: 0.12; }
.block-time-overlay[data-len="1"]{ display:none; }

/* если совсем не влезает — скрыть (высота блока маленькая) */
.block-time-overlay[data-too-small="1"]{ display:none; }
/* WEEK страховка: если где-то осталось без overlay */
.week-role-cell .block-time-vert{
  position: static !important;
  left:auto !important;
  top:auto !important;
  transform: rotate(90deg) !important;
  white-space: nowrap;
  display: inline-block;
}
/* ===== Watermark tuning for short blocks ===== */
.block-time-overlay[data-len="2"] .block-time-vert{
  font-size: 9px;
  letter-spacing: 0.2px;
  opacity: 0.10;
  transform: rotate(90deg) scaleX(0.88);
}
.block-time-overlay[data-len="3"] .block-time-vert{
  font-size: 9px;
  letter-spacing: 0.2px;
  opacity: 0.10;
  transform: rotate(90deg) scaleX(0.86);
}
.block-time-overlay[data-len="4"] .block-time-vert{
  font-size: 10px;
  letter-spacing: 0.25px;
  opacity: 0.11;
  transform: rotate(90deg) scaleX(0.90);
}
/* ===== Labels never overflow blocks ===== */
.day-cell__label,
.week-role-cell__label{
  font-weight: 700;
  font-size: 12px;
  line-height: 1;

  padding: 0;                 /* ← УБРАЛИ */
  border-radius: 0;           /* ← УБРАЛИ КРУЖКИ */
  background: none;           /* ← УБРАЛИ ФОН */

  color: #111827;
  white-space: nowrap;
  overflow: hidden;
}

/* На очень узких колонках (неделя официанты/кухня) — чуть меньше */
.week-role-cell__label{
  font-size: 12px;
}

@media (max-width: 900px){
  .week-role-cell__label{ font-size: 11px; }
}
.day-cell__label,
.week-role-cell__label{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: clip; /* без троеточий */
}
.block-time-overlay[data-len="3"] .block-time-vert{
  font-size: 9px;
  letter-spacing: 0.2px;
  opacity: 0.10;
  transform: rotate(90deg) scaleX(0.86);
}
.day-cell__label,
.week-role-cell__label{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: clip; /* без троеточий */
}
/* ===== Labels: читаемо, не жирно, всегда видно ===== */
.day-cell__label,
.week-role-cell__label{
  font-weight: 700 !important;      /* было слишком жирно */
  font-size: 12px !important;
  line-height: 1 !important;

  display: inline-block;
  max-width: calc(100% - 6px);
  padding: 2px 6px;
  border-radius: 999px;

  background: rgba(255,255,255,0.65);  /* мягкая подложка */
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);

  color: rgba(17,24,39,0.92) !important;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: clip; /* без ... */
}

/* на очень узких колонках */
.week-role-cell__label{ font-size: 11px !important; }

/* ===== Watermark: тихий, не мешает имени ===== */
.block-time-overlay{
  justify-content: center;
  align-items: center;
}

/* сдвигаем чуть ниже центра, чтобы не спорил с именем */
.block-time-overlay .block-time-vert{
  transform: translateY(10px) rotate(90deg) scaleX(0.92) !important;
  opacity: 0.08 !important;         /* тише */
  font-weight: 800 !important;      /* меньше жир */
  font-size: 11px !important;
  letter-spacing: 0.2px !important;
  color: rgba(17,24,39,0.85) !important;
}

/* короткие блоки — ещё тише и меньше */
.block-time-overlay[data-len="2"] .block-time-vert{
  font-size: 9px !important;
  opacity: 0.06 !important;
  transform: translateY(10px) rotate(90deg) scaleX(0.86) !important;
}
.block-time-overlay[data-len="3"] .block-time-vert{
  font-size: 9px !important;
  opacity: 0.06 !important;
  transform: translateY(10px) rotate(90deg) scaleX(0.86) !important;
}
.block-time-overlay[data-len="4"] .block-time-vert{
  font-size: 10px !important;
  opacity: 0.07 !important;
  transform: translateY(10px) rotate(90deg) scaleX(0.90) !important;
}
/* ===== FINAL: labels plain (no bubble), min 4 chars handled by JS ===== */
.day-cell__label,
.week-role-cell__label{
  background: none !important;
  border-radius: 0 !important;
  padding: 0 !important;

  font-weight: 600 !important;   /* тоньше */
  color: rgba(17,24,39,0.92) !important;

  display: block;
  max-width: 100%;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: clip; /* без ... */
}
/* ===== FINAL: blocks rounded only on top ===== */
.day-cell--filled.day-cell--end{
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
}

.week-role-cell--filled.week-role-cell--end{
  border-bottom-left-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
}
/* ===== Rounded BOTH sides for blocks ===== */

/* середина (между start и end) — без скруглений */
.day-cell--filled,
.week-role-cell--filled{
  border-radius: 0 !important;
}

/* начало — скругляем верх */
.day-cell--filled.day-cell--start,
.week-role-cell--filled.week-role-cell--start{
  border-top-left-radius: 10px !important;
  border-top-right-radius: 10px !important;
}

/* конец — скругляем низ */
.day-cell--filled.day-cell--end,
.week-role-cell--filled.week-role-cell--end{
  border-bottom-left-radius: 10px !important;
  border-bottom-right-radius: 10px !important;
}

/* одиночный блок (и start и end одновременно) — скругляем всё */
.day-cell--filled.day-cell--start.day-cell--end,
.week-role-cell--filled.week-role-cell--start.week-role-cell--end{
  border-radius: 10px !important;
}

/* ===== MONTH role calendar (weeks) ===== */
.month-blocks .week-day-card { border-radius: 16px; }

.month-role-title{
  font-weight: 900;
  margin: 8px 0 12px;
}

.month-week-card{
  background: #fff;
  border: 1px solid #eef2f7;
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 14px;
}

.month-week-head{
  padding: 10px 14px;
  font-weight: 900;
  background: #f7f7f8;
  border-bottom: 1px solid #eef2f7;
}

/* дни вне текущего месяца — бледные и некликабельные */
.month-cell--out{
  opacity: 0.25 !important;
  cursor: default !important;
  pointer-events: none !important;
}
/* =====================================================
   FINAL MOBILE STICKY FIX (ALL VIEWS)
   - only for phones
   - fixes Zeit column in:
     1) day-grid (.day-compact)
     2) week-role (.week-role-wrap)
     3) classic tables (.schedule-wrapper .schedule-table)  <-- THIS WAS MISSING
   ===================================================== */

@media (max-width: 820px){

  /* iOS: sticky works more stable when overflow is real "auto" */
  .day-compact,
  .week-role-wrap,
  .schedule-wrapper{
    overflow: auto !important;
    overflow-y: hidden !important;
    position: relative;
    -webkit-overflow-scrolling: touch;
  }

  /* ---------- DAY GRID (already used in Day / Week cards / Month cards) ---------- */
  .day-grid{ position: relative; }

  .day-time{
    position: sticky !important;
    left: 0 !important;
    z-index: 50 !important;
    background: #fff !important;
    box-shadow: 1px 0 0 rgba(17,24,39,0.08);
  }

  .day-head--time{
    position: sticky !important;
    left: 0 !important;
    top: 0 !important;
    z-index: 60 !important;
    background: #f3f4f6 !important;
    box-shadow: 1px 0 0 rgba(17,24,39,0.08);
  }

  /* ---------- WEEK ROLE GRID ---------- */
  .week-role-grid{
    display: grid !important;
    width: max-content !important;
    min-width: 980px !important;
    grid-auto-rows: 28px !important;
    position: relative;
  }

  .week-role-time{
    position: sticky !important;
    left: 0 !important;
    z-index: 50 !important;
    background: #fff !important;
    box-shadow: 1px 0 0 rgba(17,24,39,0.08);
  }

  .week-role-head--time{
    position: sticky !important;
    left: 0 !important;
    top: 0 !important;
    z-index: 60 !important;
    background: #f3f4f6 !important;
    box-shadow: 1px 0 0 rgba(17,24,39,0.08);
  }

  /* ---------- CLASSIC TABLE (Week/Month "Все" and other pages) ---------- */
  .schedule-table{ position: relative; }

  /* first column header */
  .schedule-table thead th:first-child{
    position: sticky !important;
    left: 0 !important;
    z-index: 70 !important;          /* выше остальных th */
    background: #f3f4f6 !important;
    box-shadow: 1px 0 0 rgba(17,24,39,0.08);
  }

  /* first column cells (time) */
  .schedule-table tbody td.time-cell{
    position: sticky !important;
    left: 0 !important;
    z-index: 55 !important;
    background: #fff !important;
    box-shadow: 1px 0 0 rgba(17,24,39,0.08);
  }
}
@media (max-width: 820px){
  /* FIX: overflow:hidden in .day-grid breaks sticky on iOS/phones */
  .day-grid{ overflow: visible !important; }
  /* на всякий случай для старых устройств */
  .day-head{ -webkit-transform: translateZ(0); transform: translateZ(0); }
}
/* ===== MOBILE LANDSCAPE: keep Zeit sticky too ===== */
@media (orientation: landscape) and (max-height: 500px){

  .day-compact,
  .week-role-wrap,
  .schedule-wrapper{
    overflow: auto !important;
    overflow-y: hidden !important;
    position: relative;
    -webkit-overflow-scrolling: touch;
  }

  /* DAY GRID */
  .day-time,
  .day-head--time{
    position: sticky !important;
    left: 0 !important;
  }
  .day-time{ z-index: 50 !important; background:#fff !important; }
  .day-head--time{ z-index: 60 !important; background:#f3f4f6 !important; }

  /* WEEK ROLE GRID */
  .week-role-time,
  .week-role-head--time{
    position: sticky !important;
    left: 0 !important;
  }
  .week-role-time{ z-index: 50 !important; background:#fff !important; }
  .week-role-head--time{ z-index: 60 !important; background:#f3f4f6 !important; }

  /* CLASSIC TABLE */
  .schedule-table thead th:first-child{
    position: sticky !important;
    left: 0 !important;
    z-index: 70 !important;
    background:#f3f4f6 !important;
  }
  .schedule-table tbody td.time-cell{
    position: sticky !important;
    left: 0 !important;
    z-index: 55 !important;
    background:#fff !important;
  }
}
/* ===== MOBILE: красивое меню-пилюли в 1 строку со скроллом ===== */
@media (max-width: 640px){
  .nav, .nav-links, .top-nav, .tabs, .menu { /* если у тебя другой класс — ниже дам точечно */
    display: flex;
    flex-wrap: nowrap;
    gap: 10px;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding: 10px 10px 12px;
    margin: 0;
    scrollbar-width: none;
  }
  .nav::-webkit-scrollbar,
  .nav-links::-webkit-scrollbar,
  .top-nav::-webkit-scrollbar,
  .tabs::-webkit-scrollbar,
  .menu::-webkit-scrollbar {
    display: none;
  }

  .nav a, .nav-links a, .top-nav a, .tabs a, .menu a{
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 14px;
    border-radius: 999px;
    font-weight: 800;
    font-size: 14px;
    line-height: 1;
    background: #eef0f3;
    color: #111827;
    border: 1px solid #e5e7eb;
    text-decoration: none;
    white-space: nowrap;
  }

  .nav a.active, .nav a[aria-current="page"],
  .nav-links a.active, .nav-links a[aria-current="page"],
  .top-nav a.active, .top-nav a[aria-current="page"],
  .tabs a.active, .tabs a[aria-current="page"],
  .menu a.active, .menu a[aria-current="page"]{
    background: #111827;
    color: #fff;
    border-color: #111827;
  }
}
/* ===== MOBILE: компактные кнопки навигации ===== */
@media (max-width: 640px) {

  /* контейнер меню */
  .nav, .nav-links, .top-nav {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    padding: 10px;
    background: transparent;
  }

  /* сами кнопки */
  .nav a, .nav-links a, .top-nav a {
    display: flex;
    align-items: center;
    justify-content: center;

    padding: 10px 8px;
    font-size: 14px;
    font-weight: 700;

    border-radius: 12px;
    background: #f3f4f6;
    color: #111827;

    border: 1px solid #e5e7eb;
    text-decoration: none;
    white-space: nowrap;
  }

  /* активная кнопка */
  .nav a.active,
  .nav a[aria-current="page"],
  .nav-links a.active,
  .top-nav a.active {
    background: #111827;
    color: #ffffff;
    border-color: #111827;
  }

  /* если кнопок нечётное количество (например Календар) */
  .nav a:last-child,
  .nav-links a:last-child,
  .top-nav a:last-child {
    grid-column: span 2;
  }
}
/* ===== FIX ONLY: Home reservations list (Today/Tomorrow) ===== */
#res-today-times .mini-res-row,
#res-tomorrow-times .mini-res-row{
  display:flex !important;
  align-items:center !important;
  justify-content:space-between !important;
  gap:10px !important;

  padding:10px 12px !important;
  border-radius:16px !important;
  min-height:48px !important;

  /* чтобы не распирало */
  width:100% !important;
  box-sizing:border-box !important;
}

#res-today-times .mini-res-time,
#res-tomorrow-times .mini-res-time{
  flex:0 0 68px !important;
  font-weight:900 !important;
  white-space:nowrap !important;
  font-variant-numeric: tabular-nums !important;
}

#res-today-times .mini-res-guests,
#res-tomorrow-times .mini-res-guests{
  flex:0 0 26px !important;
  text-align:center !important;
  font-weight:900 !important;
}

#res-today-times .mini-res-right,
#res-tomorrow-times .mini-res-right{
  flex:1 1 auto !important;
  display:flex !important;
  align-items:center !important;
  justify-content:flex-end !important;
  gap:8px !important;

  /* КЛЮЧ: не переносить бейджи/скасовано */
  white-space:nowrap !important;
  min-width:0 !important;
}

#res-today-times .mini-res-badge,
#res-tomorrow-times .mini-res-badge{
  flex:0 0 auto !important;
}

#res-today-times .mini-res-cancel,
#res-tomorrow-times .mini-res-cancel{
  flex:0 0 auto !important;
}

/* чтобы past/cancelled НЕ ломали размеры */
#res-today-times .mini-res-row.is-past,
#res-tomorrow-times .mini-res-row.is-past{
  opacity:0.55 !important;
}
#res-today-times .mini-res-row.is-cancelled,
#res-tomorrow-times .mini-res-row.is-cancelled{
  opacity:0.45 !important;
}
/* ===== Holiday badge (fix glued text) ===== */
.sch-holiday-badge{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-left: 8px;            /* ключ: пробел/отступ */
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 800;
  line-height: 1;
  background: rgba(245, 158, 11, 0.16);
  color: rgba(146, 64, 14, 0.95);
  border: 1px solid rgba(245, 158, 11, 0.25);
  white-space: nowrap;
}

/* day card header layout */
.week-day-title--flex{
  display:flex;
  align-items:center;
  gap: 8px;
}

/* week role header layout */
.week-role-head--dayflex{
  display:flex;
  align-items:center;
  justify-content:center;
  gap: 8px;
}

/* optional: text part */
.week-day-head-text{
  display:inline-block;
}
.week-day-title--flex{
  display:flex;
  align-items:center;
  gap:10px;
}

.sch-holiday-badge{
  margin-left:10px;
  font-size:12px;
  font-weight:800;
  padding:3px 10px;
  border-radius:999px;
  background:#f3e8d6;
  color:#7a4a12;
  border:1px solid rgba(122,74,18,.25);
  line-height:1;
}
/* FIX: columns never "float" */
.schedule-table th, .schedule-table td{
  overflow: hidden;
}

/* ширины колонок */
.schedule-table th:first-child,
.schedule-table td.time-cell{
  width: 72px;
  min-width: 72px;
  max-width: 72px;
}

/* остальные колонки */
.schedule-table th:not(:first-child),
.schedule-table td:not(.time-cell){
  width: 140px;
  min-width: 140px;
  max-width: 140px;
}